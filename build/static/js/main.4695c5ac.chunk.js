(this["webpackJsonpcol-vw-bkms"]=this["webpackJsonpcol-vw-bkms"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var o,r=n(1),c=n.n(r),i=n(6),u=n.n(i),l=n(7),s=n(2),d=function(e){return[{children:[],id:"13",index:0,parentId:e,title:"Empty folder",url:null},{id:"14",index:1,parentId:e,title:"Twitter",url:"https://www.twitter.com"},{id:"15",index:2,parentId:e,title:"Twitter",url:"https://www.twitter.com"}]},a=function(e){return[{children:d("10"),id:"10",index:0,parentId:e,title:"Twitter",url:null},{id:"11",index:1,parentId:e,title:"Yelp",url:"https://www.yelp.com"},{id:"12",index:2,parentId:e,title:"Yelp",url:"https://www.yelp.com"}]},m=function(e){return[{children:a("7"),id:"7",index:0,parentId:e,title:"Yelp",url:null},{id:"8",index:1,parentId:e,title:"Airbnb",url:"https://www.airbnb.com"},{id:"9",index:2,parentId:e,title:"Airbnb",url:"https://www.airbnb.com"}]},f=function(e){return[{id:"4",index:0,parentId:e,title:"Facebook",url:"https://www.facebook.com"},{children:m("5"),id:"5",index:1,parentId:e,title:"Airbnb",url:null},{id:"6",index:2,parentId:e,title:"Facebook",url:"https://www.facebook.com"}]},b=(o="0",f("1"),n(0)),j=function(e){var t=e.bookmark,n=e.columnObj,o=e.rootObj;Object(r.useEffect)((function(){n.isColumnFocused&&n.currentFocus===t.index&&c.current.focus()}),[t,n]);var c=Object(r.useRef)(),i={backgroundImage:"url(chrome://favicon/".concat(t.url,")")};return Object(b.jsxs)("a",{className:"column-item bookmark",href:t.url,onFocus:function(){n.setCurrentFocus(t.index),o.setFocusColumn(n.columnIndex)},onKeyDown:function(e){return function(e){"ArrowUp"!==e.key&&"ArrowDown"!==e.key||n.updateCurrentFocus(t.index,e.key),"ArrowLeft"===e.key&&(e.preventDefault(),n.columnIndex>=0&&o.setFocusColumn(n.columnIndex-1)),"Backspace"===e.key&&o.removeNode(t)}(e)},ref:c,tabIndex:0,children:[Object(b.jsx)("div",{className:"column-item-icon",children:Object(b.jsx)("div",{className:"favicon",style:i})}),Object(b.jsx)("div",{className:"column-item-title",children:t.title})]})},h=Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:Object(b.jsx)("path",{d:"M11 8L5 4V12L11 8Z",fill:"black"})}),w=Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:Object(b.jsx)("path",{d:"M6 2H1V14H15V5H9L6 2Z",fill:"black"})}),p=function(e){var t=e.columnObj,n=e.folder,o=e.rootObj;Object(r.useEffect)((function(){t.isColumnFocused&&t.currentFocus===n.index&&c.current.focus()}),[t,n]);var c=Object(r.useRef)(),i=o.openFolderIds.some((function(e){return e.id===n.id}));return Object(b.jsxs)("div",{className:i?"column-item folder selected":"column-item folder",onFocus:function(){t.setCurrentFocus(n.index),o.setFocusColumn(t.columnIndex),i||o.openFolderIdsCallback({id:n.id,parentId:n.parentId})},onKeyDown:function(e){return function(e){"ArrowUp"!==e.key&&"ArrowDown"!==e.key||t.updateCurrentFocus(n.index,e.key),"ArrowRight"===e.key&&(e.preventDefault(),n.children.length>0&&o.setFocusColumn(t.columnIndex+1)),"ArrowLeft"===e.key&&(e.preventDefault(),t.columnIndex>=0&&o.setFocusColumn(t.columnIndex-1)),"Backspace"===e.key&&o.removeNode(n)}(e)},ref:c,tabIndex:0,children:[Object(b.jsx)("div",{className:"column-item-icon",children:w}),Object(b.jsx)("div",{className:"column-item-title",children:n.title}),Object(b.jsx)("div",{className:"column-item-icon",children:h})]})},O=function(e){var t=e.columnIndex,n=e.isColumnFocused,o=e.node,c=e.rootObj,i=Object(r.useState)(),u=Object(s.a)(i,2),l=u[0],d=u[1];Object(r.useEffect)((function(){a.current.scrollIntoView({behavior:"smooth"})}),[]),Object(r.useEffect)((function(){n&&!l&&d(0)}),[n]);var a=Object(r.useRef)(),m={columnIndex:t,currentFocus:l,isColumnFocused:n,setCurrentFocus:d,updateCurrentFocus:function(e,t){"ArrowUp"===t&&d(0===e?o.children.length-1:e-1),"ArrowDown"===t&&(e===o.children.length-1?d(0):d(e+1))}};return Object(b.jsx)("div",{className:"column",ref:a,children:o.children.length>0?o.children.map((function(e){return e.children?Object(b.jsx)(p,{columnObj:m,folder:e,rootObj:c},e.id):Object(b.jsx)(j,{bookmark:e,columnObj:m,rootObj:c},e.id)})):Object(b.jsx)("div",{className:"column-item empty",children:Object(b.jsx)("div",{className:"column-item-title",children:"This folder is empty"})})})},x=(n(13),function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(),i=Object(s.a)(c,2),u=i[0],d=i[1],a=Object(r.useState)([]),m=Object(s.a)(a,2),f=m[0],j=m[1],h=Object(r.useState)([{id:"0",parentId:null}]),w=Object(s.a)(h,2),p=w[0],x=w[1];Object(r.useEffect)((function(){chrome.bookmarks.getTree((function(e){return o(e)})),chrome.runtime.onMessage.addListener(v),chrome.storage.local.get("columnViewBookmarksOpenFolderIds",(function(e){var t=e.columnViewBookmarksOpenFolderIds;t&&x(JSON.parse(t))}))}),[]),Object(r.useEffect)((function(){n.length>0&&(j([]),k(n))}),[n,u,p]);var k=function e(t){t.forEach((function(t){t.children&&(p.some((function(e){return e.id===t.id}))&&j((function(e){return[].concat(Object(l.a)(e),[Object(b.jsx)(O,{columnIndex:e.length,isColumnFocused:e.length===u,node:t,rootObj:I},t.id)])})),e(t.children))}))},v=function(e){chrome.bookmarks.getTree((function(e){return o(e)}))},I={focusColumn:u,removeNode:function(e){e.children?window.confirm("Are you sure you want to remove this folder and all of its contents?")&&chrome.bookmarks.removeTree(e.id):window.confirm("Are you sure you want to remove this bookmark?")&&chrome.bookmarks.remove(e.id)},setFocusColumn:d,openFolderIds:p,openFolderIdsCallback:function(e){if(!p.some((function(t){return t.id===e}))){for(var t,n=function(e){return p.find((function(t){return t.id===e}))},o=[e],r=e;"0"!==r.id;)t=n(r.parentId),o.unshift(t),r=t;chrome.storage.local.set({columnViewBookmarksOpenFolderIds:JSON.stringify(o)}),x(o)}}};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"app-header",children:"Column View Bookmarks"}),Object(b.jsx)("div",{className:"columns",children:f})]})});u.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(x,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.4695c5ac.chunk.js.map